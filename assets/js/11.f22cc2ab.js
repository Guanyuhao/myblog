(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{405:function(t,s,a){"use strict";a.r(s);var n=a(42),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"node-js-å®ç°é˜»å¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-js-å®ç°é˜»å¡"}},[t._v("#")]),t._v(" node.js å®ç°é˜»å¡")]),t._v(" "),a("h2",{attrs:{id:"çœ‹ä¸€çœ‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#çœ‹ä¸€çœ‹"}},[t._v("#")]),t._v(" çœ‹ä¸€çœ‹")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\nfs.readdir(path[, options], callback)\n\nfs.readdirSync(path[, options])\n\n*/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rootpath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" docs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rootpath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/docs/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" fileDirectoryName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readdir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("docs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" files")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fileDirectoryName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileDirectoryName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// []")]),t._v("\nfileDirectoryName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readdirSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("docs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileDirectoryName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [...ç›®å½•]")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("æé—®")]),t._v(" "),a("p",[t._v("ğŸ‘† ç»“æœå‡ºç°çš„åŸå› å¾ˆç®€å•ï¼Œå› ä¸ºå¼‚æ­¥äº†ã€‚readdirSync å‘ç”Ÿäº†é˜»å¡äº†è€Œ readdir æ²¡æœ‰ã€‚\nâ“ å¼•å‡ºä¸€ä¸ªé—®é¢˜ node.js å®ç°é˜»å¡ï¼Ÿ")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"è¯´ä¸€è¯´"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¯´ä¸€è¯´"}},[t._v("#")]),t._v(" è¯´ä¸€è¯´")]),t._v(" "),a("p",[t._v("node.js çš„å•çº¿ç¨‹ä»…ä»…æŒ‡ javascript å¼•æ“æ˜¯å•çº¿ç¨‹çš„ï¼Œæ— è®ºå¦‚ä½•æˆ‘ä»¬æ²¡æœ‰åŠæ³•åœ¨ javascript ä¸­å®ç°å¤šçº¿ç¨‹å’Œé˜»å¡ï¼›ä½†å¯¹äº node.js çš„å…¶ä»–æ–¹é¢ä¸ä»£è¡¨ä¸èƒ½å¤šçº¿ç¨‹ï¼Œä¾‹å¦‚ IOã€‚å¦‚æœç°åœ¨ node.js é­å—å¤§é‡è¯·æ±‚ï¼Œè€Œè¿™äº›è¯·æ±‚éƒ½æ˜¯ IO å¯†é›†å‹çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶ node æ¯æ¥å—ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨é‡åˆ°è€—æ—¶è¾ƒé•¿çš„ IO æ“ä½œæ—¶ï¼Œjavascript çº¿ç¨‹å¹¶ä¸ä¼šä¸€ç›´åœ¨æ­¤ç­‰å¾…ï¼Œè€Œæ˜¯äº¤å‡ºæ§åˆ¶ï¼Œåœ¨å›è°ƒå †æ ˆé‡Œæ·»åŠ  IO æ“ä½œå®Œæˆåè¦æ‰§è¡Œçš„æ“ä½œã€‚")]),t._v(" "),a("p",[t._v("è€Œåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œnode.js åˆå¯ä»¥å¤„ç†å…¶ä»–è¯·æ±‚äº†ã€‚æ‰€ä»¥å¯¹äº node.js è€Œè¨€ï¼Œè™½ç„¶ javascript æ˜¯å•çº¿ç¨‹çš„ï¼Œæ¯æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œä½† javascript å¤„ç†ä¸€ä¸ªè¯·æ±‚çš„æ—¶é—´å¾€å¾€è¾ƒçŸ­ï¼ˆå¯¹äº IO å¯†é›†å‹åº”ç”¨è€Œè¨€ï¼‰ï¼Œåªè¦å¯ä»¥å¼‚æ­¥å¤„ç†ï¼Œé‚£ä¹ˆåœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œæ­¤æ¬¡è¯·æ±‚éƒ½ä¼šé‡Šæ”¾æ§åˆ¶ï¼Œä½¿ node.js èƒ½å¤„ç†å…¶ä»–è¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("è¿™å¹¶å‘è¯·æ±‚çš„åŒæ—¶ï¼ŒIO å…¶å®ä¸€ç›´å¤„äºå¹¶å‘çŠ¶æ€ï¼Œå‡å°‘å¤„ç†è¯·æ±‚çš„çº¿ç¨‹æ•°ï¼ŒèŠ‚çº¦èµ„æºä»¥å¢åŠ  IO çš„çº¿ç¨‹æ•°ï¼Œå¯¹äºé€šå¸¸è€—æ—¶å¾ˆé•¿çš„ IO å¯†é›†å‹è¯·æ±‚æ¥è¯´ï¼Œæ— ç–‘èƒ½å¸¦æ¥æ€§èƒ½ä¸Šçš„æå‡ã€‚")]),t._v(" "),a("p",[t._v("å‰é¢å•°å•°å—¦å—¦åœ°ä¸€ç›´åœ¨å¼ºè°ƒ IO å¯†é›†å‹ï¼Œå…¶å®æ˜¯åœ¨å¼ºè°ƒ node.js çš„å¼ºé¡¹ã€‚ç›¸åº”çš„ï¼Œå®ƒçš„çŸ­æ¿å°±æ˜¯ CPU å¯†é›†å‹çš„è¯·æ±‚ã€‚é“ç†å¾ˆç®€å•ï¼Œjavascript ä¸ä¼šå¹¶å‘ï¼Œåªèƒ½ä¸€ä¸ªè¯·æ±‚å®Œæˆåæ‰èƒ½å¤„ç†å…¶ä»–è¯·æ±‚ã€‚ä¸€ä¸ªè¯·æ±‚å¤„ç†çš„æ—¶é—´è¶Šé•¿ï¼Œå…¶ä»–è¯·æ±‚ç­‰å¾…çš„æ—¶é—´è¶Šé•¿ã€‚åŒä¸€æ—¶é—´åªä¼šæœ‰ä¸€ä¸ªè¯·æ±‚è¢«å¤„ç†ï¼Œå¹¶å‘æ€§èƒ½å¾ˆä½ã€‚")]),t._v(" "),a("p",[t._v("è¯è¯´åˆ°è¿™å„¿ï¼Œæˆ‘æƒ³ç”³æ˜ä¸€ç‚¹ï¼šnode.js ä¸åº”è¯¥è¢«é˜»å¡ï¼›èƒ½å¼‚æ­¥å¤„ç†çš„æ–¹æ³•å¼‚æ­¥å¤„ç†ï¼ˆå¦‚ä½¿ç”¨ fs.readFile()ï¼Œè€Œé fs.syncReadFile()fs.readFileSync()æ–¹æ³•ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("node ä¸­ä¸èƒ½é˜»å¡ï¼Œå¹¶ä¸ä»£è¡¨ node å¤–ä¸èƒ½é˜»å¡")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://www.nodeclass.com/articles/310731",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŸæ–‡"),a("OutboundLink")],1),t._v("ã€‚")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n  ç”¨ async æ¥æä¸€ä¸ª\n  å†æ åœ¨ fibersä¸­å®ç°é˜»å¡\n\n*/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" async "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"async"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"async start"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("reslove")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reslove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"async end"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"--"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æä¸ªæˆç†Ÿç‚¹çš„")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Fiber "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fibers"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fiber")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" httpFiber "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Fiber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.baidu.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dataFiber "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Fiber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"end"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      httpFiber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Fiber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yield")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("fibers çš„è¿è¡Œå¹¶ä¸åœ¨ node è¿›ç¨‹ä¸­ï¼Œæ‰€ä»¥åœ¨ fibers å†…éƒ¨å®ç°é˜»å¡å¯¹ node æ•´ä½“çš„æ€§èƒ½å¹¶æ²¡æœ‰å½±å“ã€‚è€Œä¸”å®ç°èµ·æ¥ä¹Ÿæ˜¯ç›¸å½“å®¹æ˜“ï¼Œåªéœ€è¦åœ¨æƒ³é˜»å¡çš„æ—¶å€™ï¼ŒæŠŠ fiber yield æ‰ã€‚éœ€è¦ç»§ç»­è¿è¡Œï¼Œåˆ™æ‰§è¡Œ run()æ¢å¤ fiberã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å½“ http.get è¯·æ±‚å‘èµ·æ—¶é˜»å¡å½“å‰ç¨‹åºï¼Œå½“æ‰€æœ‰æ•°æ®æ¥æ”¶å®Œæˆæ—¶ï¼Œæ¢å¤ç¨‹åºã€‚")]),t._v(" "),a("p",[t._v("äºæ˜¯æˆ‘ä»¬åœ¨è°ƒç”¨ http.get åä½¿ç”¨ Fiber.yield()ä¸­æ–­æ­¤ fiberã€‚åœ¨å¯¹ response çš„ç›‘å¬ä¸­ï¼Œå¦‚æœè§¦å‘ end äº‹ä»¶è¡¨æ˜æ•°æ®ä¼ è¾“å®Œæˆï¼Œäºæ˜¯åœ¨ end çš„å›è°ƒå‡½æ•°ä¸­ï¼Œè°ƒç”¨ Fiber.current.run()æ¢å¤ fiberï¼Œè¿™æ ·ï¼Œåç»­çš„ä»£ç å°±ä»¥åŒæ­¥çš„æ–¹å¼æ‹¿åˆ° http.get è¯·æ±‚çš„æ•°æ®")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("æé—®")]),t._v(" "),a("p",[t._v("ğŸ‘† å¾ˆé¡ºåˆ©æˆ‘ä»¬å®ç°äº†ï¼Œä½†æ˜¯ä¸Šé¢ä¸¤ç§æ–¹æ³•éƒ½åªæ˜¯ä¸€ä¸ªç¯å¢ƒä¸­é˜»å¡å¹¶ä¸åƒ readdir ä¸ readdirSync\nâ“ å¦‚ä½•åƒ readdirSync ä¸­åœ¨ node ä¸­å®ç°é˜»å¡ï¼Ÿ")])])])}),[],!1,null,null,null);s.default=r.exports}}]);