(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{309:function(t,s,a){"use strict";a.r(s);var n=a(29),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"è·¨åŸŸä»¥åŠè§£å†³"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸä»¥åŠè§£å†³"}},[t._v("#")]),t._v(" è·¨åŸŸä»¥åŠè§£å†³")]),t._v(" "),a("h2",{attrs:{id:"åŒæºç­–ç•¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŒæºç­–ç•¥"}},[t._v("#")]),t._v(" åŒæºç­–ç•¥")]),t._v(" "),a("blockquote",[a("p",[t._v("è¿›å…¥"),a("a",{attrs:{href:"'https://baike.baidu.com/item/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/3927875?fr=aladdin'"}},[t._v("ç™¾åº¦ç™¾ç§‘")]),t._v("æŸ¥çœ‹è§£é‡Š")])]),t._v(" "),a("p",[t._v("åŒæºç­–ç•¥ï¼ˆSame origin policyï¼‰æ˜¯ä¸€ç§çº¦å®šï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚æœç¼ºå°‘äº†åŒæºç­–ç•¥ï¼Œåˆ™æµè§ˆå™¨çš„æ­£å¸¸åŠŸèƒ½å¯èƒ½éƒ½ä¼šå—åˆ°å½±å“ã€‚å¯ä»¥è¯´ Web æ˜¯æ„å»ºåœ¨åŒæºç­–ç•¥åŸºç¡€ä¹‹ä¸Šçš„ï¼Œæµè§ˆå™¨åªæ˜¯é’ˆå¯¹åŒæºç­–ç•¥çš„ä¸€ç§å®ç°")]),t._v(" "),a("p",[a("strong",[t._v("åŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„è¡Œä¸ºï¼Œæ˜¯ä¸ºäº†ä¿æŠ¤æœ¬åœ°æ•°æ®ä¸è¢« JavaScript ä»£ç è·å–å›æ¥çš„æ•°æ®æ±¡æŸ“ï¼Œå› æ­¤æ‹¦æˆªçš„æ˜¯å®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚å›æ¥çš„æ•°æ®æ¥æ”¶ï¼Œå³è¯·æ±‚å‘é€äº†ï¼ŒæœåŠ¡å™¨å“åº”äº†ï¼Œä½†æ˜¯æ— æ³•è¢«æµè§ˆå™¨æ¥æ”¶")])]),t._v(" "),a("h3",{attrs:{id:"åŒæºè¦æ±‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŒæºè¦æ±‚"}},[t._v("#")]),t._v(" åŒæºè¦æ±‚")]),t._v(" "),a("ul",[a("li",[t._v("åè®®ç›¸åŒ")]),t._v(" "),a("li",[t._v("åŸŸåç›¸åŒ")]),t._v(" "),a("li",[t._v("ç«¯å£ç›¸åŒ")])]),t._v(" "),a("p",[a("strong",[t._v("ç›®çš„")])]),t._v(" "),a("p",[t._v("ä¸ºäº†ä¿è¯ç”¨æˆ·ä¿¡æ¯çš„å®‰å…¨ï¼Œé˜²æ­¢æ¶æ„çš„ç½‘ç«™çªƒå–æ•°æ®")]),t._v(" "),a("p",[a("strong",[t._v("å¦‚æœéåŒæºï¼Œå…±æœ‰ä¸‰ç§è¡Œä¸ºå—åˆ°é™åˆ¶")])]),t._v(" "),a("ol",[a("li",[t._v("æ— æ³•è·å–éåŒæºç½‘é¡µçš„ cookieã€localstorage å’Œ indexedDBã€‚")]),t._v(" "),a("li",[t._v("æ— æ³•è®¿é—®éåŒæºç½‘é¡µçš„ DOM ï¼ˆiframeï¼‰ã€‚")]),t._v(" "),a("li",[t._v("æ— æ³•å‘éåŒæºåœ°å€å‘é€ AJAX è¯·æ±‚ æˆ– fetch è¯·æ±‚ï¼ˆå¯ä»¥å‘é€ï¼Œä½†æµè§ˆå™¨æ‹’ç»æ¥å—å“åº”ï¼‰ã€‚")])]),t._v(" "),a("blockquote",[a("p",[t._v("æ³¨æ„ï¼ï¼ï¼ğŸ™‹â€ è¯·æ±‚è·¨åŸŸäº†ï¼Œè¯·æ±‚å‘åˆ°åº•å‘å‡ºå»æ²¡ç”¨ï¼Ÿ")])]),t._v(" "),a("ul",[a("li",[t._v("ç­”æ¡ˆæ˜¯è‚¯å®šå‘å‡ºå»äº†ï¼Œä½†æ˜¯æµè§ˆå™¨æ‹¦æˆªäº†å“åº”")])]),t._v(" "),a("h2",{attrs:{id:"å¸¸è§è·¨åŸŸçš„è§£å†³åŠæ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§è·¨åŸŸçš„è§£å†³åŠæ³•"}},[t._v("#")]),t._v(" å¸¸è§è·¨åŸŸçš„è§£å†³åŠæ³•")]),t._v(" "),a("ol",[a("li",[t._v("é€šè¿‡ JSONP è·¨åŸŸ")]),t._v(" "),a("li",[t._v("è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰")]),t._v(" "),a("li",[t._v("postMessage è·¨åŸŸ")]),t._v(" "),a("li",[t._v("window.name + iframe è·¨åŸŸ")]),t._v(" "),a("li",[t._v("document.domain + iframe è·¨åŸŸ")]),t._v(" "),a("li",[t._v("location.hash + iframe è·¨åŸŸ")]),t._v(" "),a("li",[t._v("nginx ä»£ç†è·¨åŸŸ")]),t._v(" "),a("li",[t._v("nodejs ä¸­é—´ä»¶ä»£ç†è·¨åŸŸ")]),t._v(" "),a("li",[t._v("WebSocket åè®®è·¨åŸŸ")])]),t._v(" "),a("h3",{attrs:{id:"jsonp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsonp"}},[t._v("#")]),t._v(" JSONP")]),t._v(" "),a("p",[t._v("JSONP çš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ©ç”¨ "),a("code",[t._v("<script>")]),t._v(" æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„æ¼æ´ã€‚é€šè¿‡ "),a("code",[t._v("<script>")]),t._v(" æ ‡ç­¾æŒ‡å‘ä¸€ä¸ªéœ€è¦è®¿é—®çš„åœ°å€å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥æ¥æ”¶æ•°æ®å½“éœ€è¦é€šè®¯æ—¶")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://domain/api?param1=a&param2=b&callback=jsonp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}}),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jsonp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("JSONP ä½¿ç”¨ç®€å•ä¸”å…¼å®¹æ€§ä¸é”™ï¼Œä½†æ˜¯åªé™äº "),a("code",[t._v("get")]),t._v(" è¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("åœ¨å¼€å‘ä¸­å¯èƒ½ä¼šé‡åˆ°å¤šä¸ª JSONP è¯·æ±‚çš„å›è°ƒå‡½æ•°åæ˜¯ç›¸åŒçš„ï¼Œè¿™æ—¶å€™å°±éœ€è¦è‡ªå·±å°è£…ä¸€ä¸ª JSONPï¼Œä»¥ä¸‹æ˜¯ç®€å•å®ç°")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jsonp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" jsonpCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" success")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" script "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("async "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/javascript"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("jsonpCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    success "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jsonp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"callback"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"cors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cors"}},[t._v("#")]),t._v(" CORS")]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/04/cors.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("CORS æ˜¯ä¸€ä¸ª W3C æ ‡å‡†ï¼Œå…¨ç§°æ˜¯è·¨åŸŸèµ„æºå…±äº«ï¼ˆCross-origin resource sharingï¼‰ï¼Œå®ƒå…è®¸æµè§ˆå™¨å‘è·¨æºæœåŠ¡å™¨ï¼Œå‘å‡º XMLHttpRequest è¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("æ•´ä¸ª CORS é€šä¿¡è¿‡ç¨‹ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨å®Œæˆï¼Œä¸éœ€è¦ç”¨æˆ·å‚ä¸ã€‚å¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒCORS é€šä¿¡ä¸æ™®é€šçš„ AJAX é€šä¿¡æ²¡æœ‰å·®åˆ«ï¼Œä»£ç å®Œå…¨ä¸€æ ·ã€‚æµè§ˆå™¨ä¸€æ—¦å‘ç° AJAX è¯·æ±‚è·¨åŸŸï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è¯·æ±‚ï¼Œä½†ç”¨æˆ·ä¸ä¼šæœ‰æ„ŸçŸ¥ã€‚å› æ­¤ï¼Œå®ç° CORS é€šä¿¡çš„å…³é”®æ˜¯æœåŠ¡å™¨ã€‚åªè¦æœåŠ¡å™¨å®ç°äº† CORS æ¥å£ï¼Œå°±å¯ä»¥è·¨åŸŸé€šä¿¡")]),t._v(" "),a("p",[a("strong",[t._v("æœåŠ¡å™¨ç«¯é…ç½®")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Access-Control-Allow-Origin ï¼ˆå¿…å«ï¼‰ â€“ å…è®¸çš„åŸŸåï¼Œåªèƒ½å¡« "),a("code",[t._v("*")]),t._v("ï¼ˆé€šé…ç¬¦ï¼‰æˆ–è€…å•åŸŸå")])]),t._v(" "),a("li",[a("p",[t._v("Access-Control-Allow-Methods ï¼ˆå¿…å«ï¼‰ â€“ è¿™å…è®¸è·¨åŸŸè¯·æ±‚çš„ http æ–¹æ³•ï¼ˆå¸¸è§æœ‰ "),a("code",[t._v("POSTã€GETã€OPTIONS")])])]),t._v(" "),a("li",[a("p",[t._v("Access-Control-Allow-Headers ï¼ˆå½“é¢„è¯·æ±‚ä¸­åŒ…å« "),a("code",[t._v("Access-Control-Request-Headers")]),t._v(" æ—¶å¿…é¡»åŒ…å«ï¼‰ â€“ è¿™æ˜¯å¯¹é¢„è¯·æ±‚å½“ä¸­ "),a("code",[t._v("Access-Control-Request-Headers")]),t._v(" çš„å›å¤ï¼Œå’Œä¸Šé¢ä¸€æ ·æ˜¯ä»¥é€—å·åˆ†éš”çš„åˆ—è¡¨ï¼Œå¯ä»¥è¿”å›æ‰€æœ‰æ”¯æŒçš„å¤´éƒ¨")])]),t._v(" "),a("li",[a("p",[t._v("Access-Control-Allow-Credentials ï¼ˆå¯é€‰ï¼‰ â€“ è¡¨ç¤ºæ˜¯å¦å…è®¸å‘é€ "),a("code",[t._v("Cookie")]),t._v("ï¼Œåªæœ‰ä¸€ä¸ªå¯é€‰å€¼ï¼š"),a("code",[t._v("true")]),t._v("ï¼ˆå¿…ä¸ºå°å†™ï¼‰ã€‚å¦‚æœä¸åŒ…å« "),a("code",[t._v("cookies")]),t._v("ï¼Œè¯·ç•¥å»è¯¥é¡¹ï¼Œè€Œä¸æ˜¯å¡«å†™ "),a("code",[t._v("false")]),t._v("ã€‚è¿™ä¸€é¡¹ä¸ "),a("code",[t._v("XmlHttpRequest")]),t._v(" å¯¹è±¡å½“ä¸­çš„ "),a("code",[t._v("withCredentials")]),t._v(" å±æ€§åº”ä¿æŒä¸€è‡´ï¼Œå³ "),a("code",[t._v("withCredentials")]),t._v(" ä¸º "),a("code",[t._v("true")]),t._v(" æ—¶è¯¥é¡¹ä¹Ÿä¸º "),a("code",[t._v("true")]),t._v("ï¼›"),a("code",[t._v("withCredentials")]),t._v(" ä¸º "),a("code",[t._v("false")]),t._v(" æ—¶ï¼Œçœç•¥è¯¥é¡¹ä¸å†™ã€‚åä¹‹åˆ™å¯¼è‡´è¯·æ±‚å¤±è´¥")])]),t._v(" "),a("li",[a("p",[t._v("Access-Control-Max-Age ï¼ˆå¯é€‰ï¼‰ â€“ ä»¥ç§’ä¸ºå•ä½çš„ç¼“å­˜æ—¶é—´ã€‚åœ¨æœ‰æ•ˆæ—¶é—´å†…ï¼Œæµè§ˆå™¨æ— é¡»ä¸ºåŒä¸€è¯·æ±‚å†æ¬¡å‘èµ·é¢„æ£€è¯·æ±‚")])])]),t._v(" "),a("h4",{attrs:{id:"ç®€å•è¯·æ±‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç®€å•è¯·æ±‚"}},[t._v("#")]),t._v(" ç®€å•è¯·æ±‚")]),t._v(" "),a("p",[t._v("å®é™…ä¸Šæµè§ˆå™¨å°† CORS è¯·æ±‚åˆ†æˆä¸¤ç±»ï¼šç®€å•è¯·æ±‚"),a("code",[t._v("simple request")]),t._v("å’Œéç®€å•è¯·æ±‚"),a("code",[t._v("not-so-simple request")])]),t._v(" "),a("p",[t._v("ç®€å•è¯·æ±‚æ˜¯æŒ‡æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„ï¼ˆä¸€èˆ¬åªè€ƒè™‘å‰é¢ä¸¤ä¸ªæ¡ä»¶å³å¯ï¼‰ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("ä½¿ç”¨ GETã€POSTã€HEAD å…¶ä¸­ä¸€ç§è¯·æ±‚æ–¹æ³•")]),t._v(" "),a("li",[t._v("HTTP çš„å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µ:")])]),t._v(" "),a("ul",[a("li",[t._v("Accept")]),t._v(" "),a("li",[t._v("Accept-Language")]),t._v(" "),a("li",[t._v("Content-Language")]),t._v(" "),a("li",[t._v("Last-Event-ID")]),t._v(" "),a("li",[t._v("Content-Type åªèƒ½æ˜¯"),a("code",[t._v("application/x-www-form-urlencodedã€multipart/form-dataã€text/plain")])])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("è¯·æ±‚ä¸­çš„ä»»æ„ XMLHttpRequestUpload å¯¹è±¡å‡æ²¡æœ‰æ³¨å†Œä»»ä½•äº‹ä»¶ç›‘å¬å™¨")]),t._v(" "),a("li",[t._v("XMLHttpRequestUpload å¯¹è±¡å¯ä»¥ä½¿ç”¨ XMLHttpRequest.upload å±æ€§è®¿é—®ã€‚ è¯·æ±‚ä¸­æ²¡æœ‰ä½¿ç”¨ ReadableStream å¯¹è±¡")])]),t._v(" "),a("p",[t._v("å¯¹äºç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ç›´æ¥å‘èµ· CORS è¯·æ±‚ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯æœåŠ¡å™¨ç«¯ä¼šæ ¹æ®è¯·æ±‚å¤´ä¿¡æ¯ä¸­çš„ origin å­—æ®µï¼ˆåŒ…æ‹¬äº†åè®® + åŸŸå + ç«¯å£ï¼‰ï¼Œæ¥å†³å®šæ˜¯å¦åŒæ„è¿™æ¬¡è¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœ origin æŒ‡å®šçš„æºåœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨è¿”å›çš„å“åº”ï¼Œä¼šå¤šå‡ºå‡ ä¸ªå¤´ä¿¡æ¯å­—æ®µï¼š")]),t._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Access-Control-Allow-Origin:")]),t._v(" http://xxx.xxx.com\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Access-Control-Allow-Credentials:")]),t._v(" true\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Access-Control-Expose-Headers:")]),t._v(" FooBar\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Content-Type:")]),t._v(" text/html; charset=utf-8\n")])])]),a("h4",{attrs:{id:"éç®€å•è¯·æ±‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#éç®€å•è¯·æ±‚"}},[t._v("#")]),t._v(" éç®€å•è¯·æ±‚")]),t._v(" "),a("p",[t._v("éç®€å•è¯·æ±‚æ—¶æŒ‡é‚£äº›å¯¹æœåŠ¡å™¨æœ‰ç‰¹æ®Šè¦æ±‚çš„è¯·æ±‚ï¼Œæ¯”å¦‚è¯·æ±‚æ–¹æ³•æ˜¯ "),a("code",[t._v("put")]),t._v(" æˆ– "),a("code",[t._v("delete")]),t._v("ï¼Œæˆ–è€… "),a("code",[t._v("content-type")]),t._v(" çš„ç±»å‹æ˜¯ "),a("code",[t._v("application/json")]),t._v("ã€‚å…¶å®ç®€å•è¯·æ±‚ä¹‹å¤–çš„éƒ½æ˜¯éç®€å•è¯·æ±‚äº†ã€‚")]),t._v(" "),a("p",[t._v("éç®€å•è¯·æ±‚çš„ CORS è¯·æ±‚ï¼Œä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œä½¿ç”¨ "),a("code",[t._v("OPTIONS")]),t._v(" æ–¹æ³•å‘èµ·ä¸€ä¸ªé¢„æ£€ï¼ˆpreflightï¼‰è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œæµè§ˆå™¨å…ˆè¯¢é—®æœåŠ¡å™¨ï¼Œå½“å‰ç½‘é¡µæ‰€åœ¨çš„åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨çš„è®¸å¯åå•ä¹‹ä¸­ï¼Œä»¥åŠå¯ä»¥ä½¿ç”¨å“ªäº› HTTP åŠ¨è¯å’Œå¤´ä¿¡æ¯å­—æ®µã€‚åªæœ‰å¾—åˆ°è‚¯å®šç­”å¤ï¼Œæµè§ˆå™¨æ‰ä¼šå‘å‡ºæ­£å¼çš„ XMLHttpRequest è¯·æ±‚ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"/frontEndImg/cors_2.jpg",alt:"CORS"}})]),t._v(" "),a("p",[t._v("ä¸‹é¢æ˜¯ä¸€ä¸ªé¢„æ£€è¯·æ±‚çš„å¤´éƒ¨ï¼š")]),t._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token request-line"}},[a("span",{pre:!0,attrs:{class:"token property"}},[t._v("OPTIONS")]),t._v(" /cors HTTP/1.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Origin:")]),t._v(" http://api.bob.com\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Access-Control-Request-Method:")]),t._v(" PUT\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Access-Control-Request-Headers:")]),t._v(" X-Custom-Header\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Host:")]),t._v(" api.alice.com\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Accept-Language:")]),t._v(" en-US\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Connection:")]),t._v(" keep-alive\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("User-Agent:")]),t._v(" Mozilla/5.0...\n")])])]),a("p",[t._v('ä¸€æ—¦æœåŠ¡å™¨é€šè¿‡äº†"é¢„æ£€"è¯·æ±‚ï¼Œä»¥åæ¯æ¬¡æµè§ˆå™¨æ­£å¸¸çš„ CORS è¯·æ±‚ï¼Œå°±éƒ½è·Ÿç®€å•è¯·æ±‚ä¸€æ ·äº†ã€‚')]),t._v(" "),a("p",[a("a",{attrs:{href:"/https://www.zhihu.com/question/268998684/answer/344949204"}},[t._v("ä¸ºä»€ä¹ˆè·¨åŸŸçš„ post è¯·æ±‚åŒºåˆ†ä¸ºç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚")])]),t._v(" "),a("h2",{attrs:{id:"postmessage-è·¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#postmessage-è·¨åŸŸ"}},[t._v("#")]),t._v(" postMessage è·¨åŸŸ")]),t._v(" "),a("p",[a("code",[t._v("window.postMessage")]),t._v(" æ˜¯ä¸€ä¸ª HTML5 çš„ apiï¼Œå…è®¸ä¸¤ä¸ªçª—å£ä¹‹é—´è¿›è¡Œè·¨åŸŸå‘é€æ¶ˆæ¯")]),t._v(" "),a("p",[t._v("è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºè·å–åµŒå…¥é¡µé¢ä¸­çš„ç¬¬ä¸‰æ–¹é¡µé¢æ•°æ®ã€‚ä¸€ä¸ªé¡µé¢å‘é€æ¶ˆæ¯ï¼Œå¦ä¸€ä¸ªé¡µé¢åˆ¤æ–­æ¥æºå¹¶æ¥æ”¶æ¶ˆæ¯")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€æ¶ˆæ¯ç«¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" receiver "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"receiver"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contentWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" btn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"send"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"click"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("preventDefault")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" val "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  receiver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" val "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ï¼"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://res.42du.cn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¥æ”¶æ¶ˆæ¯ç«¯")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiveMessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("receiveMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.42du.cn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å‚è€ƒ"),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN|window.postMessage"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"nginx-ä»£ç†è·¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-ä»£ç†è·¨åŸŸ"}},[t._v("#")]),t._v(" nginx ä»£ç†è·¨åŸŸ")]),t._v(" "),a("blockquote",[a("p",[t._v("è·¨åŸŸåŸç†ï¼š åŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥ï¼Œä¸æ˜¯ HTTP åè®®çš„ä¸€éƒ¨åˆ†ã€‚æœåŠ¡å™¨ç«¯è°ƒç”¨ HTTP æ¥å£åªæ˜¯ä½¿ç”¨ HTTP åè®®ï¼Œä¸ä¼šæ‰§è¡Œ JS è„šæœ¬ï¼Œä¸éœ€è¦åŒæºç­–ç•¥ï¼Œä¹Ÿå°±ä¸å­˜åœ¨è·¨è¶Šé—®é¢˜ã€‚")])]),t._v(" "),a("blockquote",[a("p",[t._v("å®ç°æ€è·¯ï¼š é€šè¿‡ nginx é…ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼ˆåŸŸåä¸ domain1 ç›¸åŒï¼Œç«¯å£ä¸åŒï¼‰åšè·³æ¿æœºï¼Œåå‘ä»£ç†è®¿é—® domain2 æ¥å£ï¼Œå¹¶ä¸”å¯ä»¥é¡ºä¾¿ä¿®æ”¹ cookie ä¸­ domain ä¿¡æ¯ï¼Œæ–¹ä¾¿å½“å‰åŸŸ cookie å†™å…¥ï¼Œå®ç°è·¨åŸŸç™»å½•ã€‚")])]),t._v(" "),a("div",{staticClass:"language-http extra-class"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[t._v("server {\n    listen 81;\n    server_name  www.domain1.com;\n    location / {\n        proxy_pass   http://www.domain2.com:8080;  #åå‘ä»£ç†\n        proxy_cookie_domain www.domain2.com www.domain1.com; #ä¿®æ”¹cookieé‡ŒåŸŸå\n        index  index.html index.htm;\n\n        # å½“ç”¨webpack-dev-serverç­‰ä¸­é—´ä»¶ä»£ç†æ¥å£è®¿é—®nignxæ—¶ï¼Œæ­¤æ—¶æ— æµè§ˆå™¨å‚ä¸ï¼Œæ•…æ²¡æœ‰åŒæºé™åˆ¶ï¼Œä¸‹é¢çš„è·¨åŸŸé…ç½®å¯ä¸å¯ç”¨\n        #å½“å‰ç«¯åªè·¨åŸŸä¸å¸¦cookieæ—¶ï¼Œå¯ä¸º*\n        add_header Access-Control-Allow-Origin http://www.domain1.com;\n        add_header Access-Control-Allow-Credentials true;\n    }\n}\n")])])]),a("h2",{attrs:{id:"iframe-è·¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iframe-è·¨åŸŸ"}},[t._v("#")]),t._v(" iframe è·¨åŸŸ")]),t._v(" "),a("blockquote",[a("p",[t._v("è¯¦æƒ…å¯å‚è€ƒ"),a("a",{attrs:{href:"https://segmentfault.com/a/1190000011145364",target:"_blank",rel:"noopener noreferrer"}},[t._v("å‰ç«¯è·¨åŸŸæ–¹æ¡ˆ"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("è¿˜æœ‰ä¸€äº›æ–¹æ³•ï¼Œæ¯”å¦‚"),a("code",[t._v("window.name")]),t._v("ã€"),a("code",[t._v("location.hash")]),t._v("å’Œ"),a("code",[t._v("document.domain")]),t._v("\néƒ½æ¯”è¾ƒé€‚ç”¨äº iframe çš„è·¨åŸŸï¼Œä¸è¿‡ iframe ç”¨çš„æ¯”è¾ƒå°‘äº†.")]),t._v(" "),a("h2",{attrs:{id:"å…¶ä»–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–"}},[t._v("#")]),t._v(" å…¶ä»–")]),t._v(" "),a("p",[t._v("å…³äº"),a("code",[t._v("Nodejsä¸­é—´ä»¶ä»£ç†è·¨åŸŸ")]),t._v("ã€"),a("code",[t._v("WebSocketåè®®è·¨åŸŸ")]),t._v(",å…·ä½“å®ç°éƒ½å‚è€ƒ"),a("a",{attrs:{href:"https://segmentfault.com/a/1190000011145364",target:"_blank",rel:"noopener noreferrer"}},[t._v("å‰ç«¯è·¨åŸŸæ–¹æ¡ˆ"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("WebSocket ä¸ä¼šä¸“é—¨ç”¨æ¥åšè·¨åŸŸ,ä¸€èˆ¬ä½œä¸ºæ¶ˆæ¯æ¨é€æˆ–è€…èŠå¤©ç­‰")])])}),[],!1,null,null,null);s.default=e.exports}}]);